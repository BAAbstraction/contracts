В продолжение серии постов про [NFT Address Options](https://docs.google.com/presentation/d/1BMHDSROMF2P4M7C3iZKPVcE9pVHdQoJPEC4xqgvkZIE).

Один из самых простых способов предоставить услугу деплоя – деплоить клон контракта, предоставленного пользователем. Клон в терминологии OpenZeppelin – минимальный прокси, он же [EIP1167](https://eips.ethereum.org/EIPS/eip-1167).

Его суть: минимальный по байткоду контракт для создания прокси к другому контракту, а значит самый дешевый деплой из возможных. 45 байт вместе с адресом контракта, если не ошибаюсь. То есть имеем задеплоенный основной контракт и деплоим вот этот маленький. И все вызовы к нему – это delegatecall к основному (aka логике или имплементации)

Плюсы подхода – для деплоя нужна только соль к CREATE2, а не для цепочки CREATE2-CREATE, как у нас в проекте, см. прошлые посты

Минусы – таки байткод не фиксированный, там в середине указан адрес имплементации, а значит нам с нашей архитектурой не очень подходит.
- Каждая транзакция исполняется с лишним delegatecall и сопутствующими вещами – тратим больше газа при транзакциях к контракту
- Юзеру надо деплоить сначала отдельно имплементацию – его основной контракт. Лишние действия для пользователя

Можно пойти дальше и вспомнить про minimal upgradeable proxy, он же [EIP7229](https://ethereum-magicians.org/t/erc-7229-minimal-upgradable-proxy-contract/14754) (хотя не уверен, что его приняли). В таком случае с помощью CREATE2 деплоим фиксированный байткод, а потом ставим в той же транзакции нужную имплементацию.
Технически норм вариант, но из минусов появляется то, что мы теперь можем менять имплементацию, а пользователь не хочет нам давать такую возможность после первой инициализации. Надо тогда делать прокси, в котором только один раз можно ставить имплементацию. Ну и остаются два последних минуса прошлого пункта

Поэтому мы деплоим полноценные контракты так, как это бы сделал сам пользователь (собственно не "мы деплоим" – а он это делает через наш контракт). И не нужно никому плодить сущности в виде дополнительных контрактов, и полностью безопасно с точки зрения пользователя – мы не овнер и не обладаем никакими правами после деплоя