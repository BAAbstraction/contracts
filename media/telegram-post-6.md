Давайте продолжим про [NFT Address Options](https://docs.google.com/presentation/d/1BMHDSROMF2P4M7C3iZKPVcE9pVHdQoJPEC4xqgvkZIE), а то сколько ж можно.

Лечу в самолёте без интернета, самое время заняться контрактами)

**Как происходит деплой контрактов**

Нам крайне важно две вещи:
- возможность деплоить одинаковые адреса на разных EVM-сетях
- возможность апгрейдить контракты деплоя без потери возможности деплоя на уже найденные красивые адреса

В связи с этим деплой не совсем прост. Итак, этапы:
- обязательно нужен EOA для деплоя. На все сети деплой только с него
- обязательно для деплоя первых контрактов соблюдаем порядок. Важно, чтобы у них были одинаковые адреса. После деплоя их порядок дальнейших деплоев не важен. [Вот скрипт деплоя в контракте теста](https://github.com/BAAbstraction/contracts/blob/670bad06791533a94932e7a633bd6a9a47bc32ec/test/MainFactory.t.sol#L18)
- сначала мы деплоим имплементацию IF (intermadiate factory – промеджуточной фабрики)
- потом деплоим имплементацию MF (main factory – основной фабрики)
- далее деплоим два прокси-контракта – IF и MF. Важно, чтобы нонсы были одинаковые на всех сетях – 3 и 4. Тем самым два контракта, от которых зависит адрес нового контракта, всегда будут постоянные.
- а всё

Следующий пост уже готов, и там разберём подробнее commit-reveal схему минта NFT. А после этого поста – как происходит деплой


